<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funções JS TDE</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
            background-color: #f9f9f9;
        }
        div {
            margin-bottom: 15px;
        }
        input {
            margin-right: 10px;
        }
        button {
            margin: 2px;
            padding: 5px 10px;
        }
        #resultado-basico, #resultado-array {
            font-weight: bold;
            color: #333;
            background-color: #eee;
            padding: 10px;
            min-height: 20px;
            margin-top: 10px;
        }
        .erro {
            color: red;
        }
    </style>
</head>
<body>

    <h1>Calculadora e Manipulador de Arrays (Básico)</h1>

    <h2>Operações Básicas</h2>
    <div>
        <label for="num1">Número 1:</label>
        <input type="number" id="num1" value="10">
        <label for="num2">Número 2:</label>
        <input type="number" id="num2" value="5">
    </div>
    <div>
        <button id="btn-soma">Somar</button>
        <button id="btn-subtrai">Subtrair</button>
        <button id="btn-multiplica">Multiplicar</button>
        <button id="btn-divide">Dividir</button>
    </div>
    <div id="resultado-basico"><!-- Resultado --></div>

    <hr>

    <h2>Manipulação de Array</h2>
    <div>
        <label for="array-input">Números (separados por vírgula):</label>
        <input type="text" id="array-input" value="1, 2, 3, 4, 5, 6, 7, 8, 9, 10" size="40">
    </div>
    <div>
        <button id="btn-filtrar">Filtrar Pares</button>
        <button id="btn-media">Calcular Média</button>
    </div>
    <div id="resultado-array"><!-- Resultado--></div>

    <script>
        function soma(a, b) {
            return a + b;
        }
        function subtracao(a, b) {
            return a - b;
        }
        const multiplicacao = function(a, b) {
            return a * b;
        };
        const divisao = function(a, b) {
            if (b === 0) {
                throw new Error("Não é possível dividir por zero.");
            }
            return a / b;
        };

        const filtrarPares = (array) => array.filter(num => num % 2 === 0);

        const calcularMedia = (array) => {
            if (array.length === 0) return 0;
            const somaTotal = array.reduce((acc, num) => acc + num, 0);
            return somaTotal / array.length;
        };

        function executarOperacaoArray(array, callback) {
            return callback(array);
        }

        document.addEventListener('DOMContentLoaded', () => {
            
            const num1Input = document.getElementById('num1');
            const num2Input = document.getElementById('num2');
            const resultadoBasico = document.getElementById('resultado-basico');

            const arrayInput = document.getElementById('array-input');
            const resultadoArray = document.getElementById('resultado-array');

            function getNumerosBasicos() {
                const a = parseFloat(num1Input.value);
                const b = parseFloat(num2Input.value);
                if (isNaN(a) || isNaN(b)) {
                    throw new Error("Por favor, insira números válidos.");
                }
                return { a, b };
            }

            function getArrayNumeros() {
                const texto = arrayInput.value;
                if (!texto) return [];
                
                return texto
                    .split(',')
                    .map(item => parseFloat(item.trim())) 
                    .filter(item => !isNaN(item));
            }
            
            function exibirResultado(elemento, resultado, tipo = 'sucesso') {
                elemento.classList.remove('erro'); // Remove classe de erro anterior
                
                if (tipo === 'erro') {
                    elemento.textContent = `Erro: ${resultado}`;
                    elemento.classList.add('erro');
                } else {
                    elemento.textContent = `Resultado: ${resultado}`;
                }
            }

            document.getElementById('btn-soma').addEventListener('click', () => {
                try {
                    const { a, b } = getNumerosBasicos();
                    exibirResultado(resultadoBasico, soma(a, b));
                } catch (e) {
                    exibirResultado(resultadoBasico, e.message, 'erro');
                }
            });

            document.getElementById('btn-subtrai').addEventListener('click', () => {
                try {
                    const { a, b } = getNumerosBasicos();
                    exibirResultado(resultadoBasico, subtracao(a, b));
                } catch (e) {
                    exibirResultado(resultadoBasico, e.message, 'erro');
                }
            });

            document.getElementById('btn-multiplica').addEventListener('click', () => {
                try {
                    const { a, b } = getNumerosBasicos();
                    exibirResultado(resultadoBasico, multiplicacao(a, b));
                } catch (e)
{
                    exibirResultado(resultadoBasico, e.message, 'erro');
                }
            });

            document.getElementById('btn-divide').addEventListener('click', () => {
                try {
                    const { a, b } = getNumerosBasicos();
                    const resultado = divisao(a, b);
                    const resultadoFormatado = Number.isInteger(resultado) ? resultado : resultado.toFixed(2);
                    exibirResultado(resultadoBasico, resultadoFormatado);
                } catch (e) {
                    exibirResultado(resultadoBasico, e.message, 'erro');
                }
            });

            document.getElementById('btn-filtrar').addEventListener('click', () => {
                try {
                    const array = getArrayNumeros();
                    const resultado = executarOperacaoArray(array, filtrarPares);
                    exibirResultado(resultadoArray, `[${resultado.join(', ')}]`);
                } catch (e) {
                    exibirResultado(resultadoArray, e.message, 'erro');
                }
            });

            document.getElementById('btn-media').addEventListener('click', () => {
            try {
                    const array = getArrayNumeros();

                    const resultado = executarOperacaoArray(array, calcularMedia);
                    const resultadoFormatado = Number.isInteger(resultado) ? resultado : resultado.toFixed(2);
                    exibirResultado(resultadoArray, resultadoFormatado);
                } catch (e) {
                    exibirResultado(resultadoArray, e.message, 'erro');
                }
            });

        });
    </script>
</body>
</html>